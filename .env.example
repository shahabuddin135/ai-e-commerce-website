# ============================================
# AI E-Commerce Platform - Environment Variables Template
# ============================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env files to version control

# -------------------- Application Environment --------------------
NODE_ENV=development # development | staging | production
PYTHON_ENV=development # development | staging | production

# -------------------- Frontend (Next.js) --------------------
# Public variables (exposed to browser - prefix with NEXT_PUBLIC_)
NEXT_PUBLIC_APP_NAME="AI E-Commerce Platform"
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_API_VERSION=v1

# Frontend-only variables (server-side only)
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-nextauth-secret-here-min-32-chars

# -------------------- Backend (FastAPI) --------------------
# Server Configuration
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_RELOAD=true # Set to false in production
WORKERS=1 # Number of Uvicorn workers (1 for dev, increase for production)

# API Configuration
API_PREFIX=/api/v1
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000 # Comma-separated list
CORS_CREDENTIALS=true
API_RATE_LIMIT=100/minute

# -------------------- Database (Neon Postgres) --------------------
# Neon Postgres Connection (use pooled connection for production)
DATABASE_URL=postgresql://user:password@host:5432/database_name
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_ECHO=false # Set to true to log SQL queries (development only)

# Connection pooling (PgBouncer)
DATABASE_POOLED_URL=postgresql://user:password@pooler-host:5432/database_name

# -------------------- Redis --------------------
# Redis for caching and sessions
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD= # Leave empty if no password
REDIS_MAX_CONNECTIONS=10
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# -------------------- Authentication & Security --------------------
# JWT Configuration
JWT_SECRET_KEY=your-super-secret-jwt-key-min-32-characters-long
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Hashing
PASSWORD_HASH_ALGORITHM=bcrypt
PASSWORD_MIN_LENGTH=8

# Session Configuration
SESSION_SECRET=your-session-secret-here-min-32-chars
SESSION_COOKIE_NAME=ai_ecommerce_session
SESSION_MAX_AGE=604800 # 7 days in seconds

# CSRF Protection
CSRF_SECRET=your-csrf-secret-here-min-32-chars

# -------------------- OAuth Providers --------------------
# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8000/api/v1/auth/oauth/google/callback

# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_REDIRECT_URI=http://localhost:8000/api/v1/auth/oauth/github/callback

# -------------------- Payment (Lemon Squeezy) --------------------
LEMON_SQUEEZY_API_KEY=your-lemon-squeezy-api-key
LEMON_SQUEEZY_STORE_ID=your-store-id
LEMON_SQUEEZY_WEBHOOK_SECRET=your-webhook-secret
LEMON_SQUEEZY_SIGNING_SECRET=your-signing-secret
LEMON_SQUEEZY_TEST_MODE=true # Set to false in production

# Product/Plan IDs (from Lemon Squeezy dashboard)
LEMON_SQUEEZY_BASIC_PLAN_ID=
LEMON_SQUEEZY_PRO_PLAN_ID=
LEMON_SQUEEZY_ENTERPRISE_PLAN_ID=

# -------------------- CMS (Sanity) --------------------
NEXT_PUBLIC_SANITY_PROJECT_ID=your-sanity-project-id
NEXT_PUBLIC_SANITY_DATASET=production # or development
NEXT_PUBLIC_SANITY_API_VERSION=2024-01-01
SANITY_API_TOKEN=your-sanity-api-token # For authenticated requests
SANITY_PREVIEW_SECRET=your-preview-secret
SANITY_WEBHOOK_SECRET=your-webhook-secret

# -------------------- Email (Nodemailer) --------------------
# Email Service Provider (choose one: smtp, sendgrid, ses, mailgun)
EMAIL_PROVIDER=smtp

# SMTP Configuration (if using SMTP)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false # true for 465, false for other ports
SMTP_USER=your-email@example.com
SMTP_PASSWORD=your-email-password

# SendGrid Configuration (if using SendGrid)
SENDGRID_API_KEY=your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
SENDGRID_FROM_NAME="AI E-Commerce Platform"

# AWS SES Configuration (if using SES)
AWS_SES_REGION=us-east-1
AWS_SES_ACCESS_KEY_ID=your-access-key-id
AWS_SES_SECRET_ACCESS_KEY=your-secret-access-key
AWS_SES_FROM_EMAIL=noreply@yourdomain.com

# Email Settings
EMAIL_FROM_ADDRESS=noreply@yourdomain.com
EMAIL_FROM_NAME="AI E-Commerce Platform"
EMAIL_REPLY_TO=support@yourdomain.com

# -------------------- Analytics (PostHog) --------------------
NEXT_PUBLIC_POSTHOG_KEY=your-posthog-key
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com
POSTHOG_PERSONAL_API_KEY=your-personal-api-key # For server-side events

# -------------------- Error Tracking (Sentry) --------------------
NEXT_PUBLIC_SENTRY_DSN=your-frontend-sentry-dsn
SENTRY_DSN=your-backend-sentry-dsn
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=1.0 # 1.0 = 100% in dev, reduce in production
SENTRY_AUTH_TOKEN=your-sentry-auth-token # For release tracking

# -------------------- Monitoring & Logging --------------------
# Log Level (DEBUG | INFO | WARNING | ERROR | CRITICAL)
LOG_LEVEL=INFO
LOG_FORMAT=json # json | text
LOG_FILE_ENABLED=false # Set to true to enable file logging
LOG_FILE_PATH=logs/app.log

# Uptime Monitoring
UPTIME_MONITOR_URL=https://your-uptime-monitor.com/webhook

# -------------------- Feature Flags --------------------
FEATURE_OAUTH_LOGIN=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_SUBSCRIPTION_REQUIRED=false
FEATURE_ANALYTICS_ENABLED=true
FEATURE_MAINTENANCE_MODE=false

# -------------------- Development Tools --------------------
# API Documentation
ENABLE_API_DOCS=true # Set to false in production
DOCS_URL=/docs
REDOC_URL=/redoc

# Debug Mode
DEBUG=false # NEVER set to true in production
TESTING=false

# -------------------- Deployment --------------------
# Railway (Backend)
RAILWAY_ENVIRONMENT=development
RAILWAY_PROJECT_ID=
RAILWAY_SERVICE_ID=

# Vercel (Frontend)
VERCEL_ENV=development
VERCEL_URL=
VERCEL_PROJECT_ID=
VERCEL_ORG_ID=

# -------------------- Webhooks --------------------
# Internal webhook secrets for service communication
INTERNAL_WEBHOOK_SECRET=your-internal-webhook-secret

# -------------------- Rate Limiting --------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE=redis # memory | redis
RATE_LIMIT_LOGIN=5/minute
RATE_LIMIT_REGISTER=3/hour
RATE_LIMIT_PASSWORD_RESET=3/hour
RATE_LIMIT_API=100/minute

# -------------------- Queues (Bull/BullMQ) --------------------
QUEUE_REDIS_URL=redis://localhost:6379/1 # Separate Redis DB for queues
QUEUE_CONCURRENCY=5
QUEUE_MAX_RETRIES=3

# -------------------- Storage (if needed in future) --------------------
# S3-compatible storage (Cloudflare R2, AWS S3, etc.)
# Currently using Sanity CMS for all content and media
# S3_ENDPOINT=
# S3_BUCKET=
# S3_REGION=
# S3_ACCESS_KEY_ID=
# S3_SECRET_ACCESS_KEY=
# S3_PUBLIC_URL=

# -------------------- Custom Domain --------------------
CUSTOM_DOMAIN=yourdomain.com
